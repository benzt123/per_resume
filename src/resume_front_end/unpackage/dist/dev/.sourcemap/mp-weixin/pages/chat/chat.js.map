{"version":3,"file":"chat.js","sources":["pages/chat/chat.vue","../Edgedownload/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvY2hhdC9jaGF0LnZ1ZQ"],"sourcesContent":["<template>\n\t<view class=\"container\">\n\t\t<!-- 聊天记录区域 -->\n\t\t<scroll-view \n\t\t\tclass=\"chat-container\" \n\t\t\tscroll-y=\"true\" \n\t\t\t:scroll-top=\"scrollTop\"\n\t\t\tscroll-with-animation=\"true\">\n\t\t\t\n\t\t\t<!-- 欢迎消息 -->\n\t\t\t<view class=\"message-item assistant-message\" v-if=\"messages.length === 0\">\n\t\t\t\t<view class=\"avatar assistant-avatar\">🤖</view>\n\t\t\t\t<view class=\"message-content\">\n\t\t\t\t\t<text class=\"message-text\">你好！我是你的智能记账助手。你可以：</text>\n\t\t\t\t\t<text class=\"message-text\">💰 说\"红牛20元\"来快速记账</text>\n\t\t\t\t\t<text class=\"message-text\">📊 询问理财建议和账目分析</text>\n\t\t\t\t\t<text class=\"message-text\">💡 咨询任何财务相关问题</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t\n\t\t\t<!-- 聊天消息列表 -->\n\t\t\t<view v-for=\"(message, index) in messages\" :key=\"index\" \n\t\t\t\tclass=\"message-item\" \n\t\t\t\t:class=\"message.role === 'user' ? 'user-message' : 'assistant-message'\">\n\t\t\t\t\n\t\t\t\t<!-- AI消息：头像在左边 -->\n\t\t\t\t<template v-if=\"message.role === 'assistant'\">\n\t\t\t\t\t<view class=\"avatar assistant-avatar\">🤖</view>\n\t\t\t\t\t<view class=\"message-content\">\n\t\t\t\t\t\t<text class=\"message-text\">{{ message.content }}</text>\n\t\t\t\t\t\t<text class=\"message-time\">{{ formatTime(message.timestamp) }}</text>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<!-- 记账信息每笔单独显示确认按钮 -->\n\t\t\t\t\t\t<view v-if=\"message.recordsData && message.recordsData.length > 0\" class=\"records-action\">\n\t\t\t\t\t\t\t<!-- 每笔记录单独显示 -->\n\t\t\t\t\t\t\t<view v-for=\"(record, recordIndex) in message.recordsData\" :key=\"recordIndex\" class=\"single-record-confirm\">\n\t\t\t\t\t\t\t\t<view class=\"record-card\">\n\t\t\t\t\t\t\t\t\t<view class=\"record-header\">\n\t\t\t\t\t\t\t\t\t\t<text class=\"record-type-icon\">{{ record.type === 'expense' ? '💸' : '💰' }}</text>\n\t\t\t\t\t\t\t\t\t\t<text class=\"record-type-text\">{{ record.type === 'expense' ? '支出' : '收入' }}</text>\n\t\t\t\t\t\t\t\t\t\t<text class=\"record-amount\">¥{{ record.amount }}</text>\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t<view class=\"record-details\">\n\t\t\t\t\t\t\t\t\t\t<text class=\"record-category\">分类: {{ record.category }}</text>\n\t\t\t\t\t\t\t\t\t\t<text class=\"record-time\" v-if=\"record.time\">时间: {{ record.time }}</text>\n\t\t\t\t\t\t\t\t\t\t<text class=\"record-note\" v-if=\"record.note\">备注: {{ record.note }}</text>\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t<!-- 每笔记录的独立确认按钮 -->\n\t\t\t\t\t\t\t\t\t<button \n\t\t\t\t\t\t\t\t\t\tclass=\"confirm-single-btn\" \n\t\t\t\t\t\t\t\t\t\t@click=\"confirmSingleRecord(record, recordIndex, message)\"\n\t\t\t\t\t\t\t\t\t\tv-if=\"!record.recorded\">\n\t\t\t\t\t\t\t\t\t\t✅ 确认此笔记账\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t<view class=\"recorded-single-status\" v-else>\n\t\t\t\t\t\t\t\t\t\t<text class=\"recorded-text\">✅ 已记录</text>\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</template>\n\t\t\t\t\n\t\t\t\t<!-- 用户消息：头像在右边 -->\n\t\t\t\t<template v-else>\n\t\t\t\t\t<view class=\"message-content\">\n\t\t\t\t\t\t<text class=\"message-text\">{{ message.content }}</text>\n\t\t\t\t\t\t<text class=\"message-time\">{{ formatTime(message.timestamp) }}</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"avatar user-avatar\">👤</view>\n\t\t\t\t</template>\n\t\t\t</view>\n\t\t\t\n\t\t\t<!-- 加载状态 -->\n\t\t\t<view v-if=\"isLoading\" class=\"message-item assistant-message\">\n\t\t\t\t<view class=\"avatar assistant-avatar\">🤖</view>\n\t\t\t\t<view class=\"message-content loading-content\">\n\t\t\t\t\t<view class=\"loading-dots\">\n\t\t\t\t\t\t<view class=\"dot\"></view>\n\t\t\t\t\t\t<view class=\"dot\"></view>\n\t\t\t\t\t\t<view class=\"dot\"></view>\n\t\t\t\t\t</view>\n\t\t\t\t\t<text class=\"loading-text\">AI正在思考...</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</scroll-view>\n\t\t\n\t\t<!-- 固定在底部的输入区域 -->\n\t\t<view class=\"input-container-fixed\">\n\t\t\t<!-- 功能按钮区域 -->\n\t\t\t<view class=\"function-buttons\">\n\t\t\t\t<button class=\"clear-btn\" @click=\"clearChatHistory\">\n\t\t\t\t\t🗑️ 清空记录\n\t\t\t\t</button>\n\t\t\t</view>\n\t\t\t\n\t\t\t<!-- 录音状态遮罩 -->\n\t\t\t<view class=\"recording-overlay\" v-if=\"isRecording\">\n\t\t\t\t<view class=\"recording-content\">\n\t\t\t\t\t<view class=\"voice-animation\">\n\t\t\t\t\t\t<view class=\"voice-icon\">🎤</view>\n\t\t\t\t\t\t<view class=\"wave-container\">\n\t\t\t\t\t\t\t<view class=\"wave wave1\"></view>\n\t\t\t\t\t\t\t<view class=\"wave wave2\"></view>\n\t\t\t\t\t\t\t<view class=\"wave wave3\"></view>\n\t\t\t\t\t\t\t<view class=\"wave wave4\"></view>\n\t\t\t\t\t\t\t<view class=\"wave wave5\"></view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t<text class=\"recording-text\">松开 结束</text>\n\t\t\t\t\t<text class=\"recording-hint\">正在录音...</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t\n\t\t\t<view class=\"input-row\">\n\t\t\t\t<!-- 语音按钮 -->\n\t\t\t\t<button class=\"voice-toggle-btn\" @click=\"toggleInputMode\" v-if=\"!isVoiceMode\">\n\t\t\t\t\t🎤\n\t\t\t\t</button>\n\t\t\t\t\n\t\t\t\t<!-- 键盘按钮 -->\n\t\t\t\t<button class=\"keyboard-toggle-btn\" @click=\"toggleInputMode\" v-if=\"isVoiceMode\">\n\t\t\t\t\t⌨️\n\t\t\t\t</button>\n\t\t\t\t\n\t\t\t\t<!-- 文本输入模式 -->\n\t\t\t\t<template v-if=\"!isVoiceMode\">\n\t\t\t\t\t<input \n\t\t\t\t\t\tclass=\"chat-input\" \n\t\t\t\t\t\tv-model=\"inputText\" \n\t\t\t\t\t\tplaceholder=\"输入消息...\" \n\t\t\t\t\t\t@confirm=\"sendMessage\"\n\t\t\t\t\t\t:disabled=\"isLoading\"\n\t\t\t\t\t\tconfirm-type=\"send\"\n\t\t\t\t\t/>\n\t\t\t\t\t<button \n\t\t\t\t\t\tclass=\"send-btn\" \n\t\t\t\t\t\t@click=\"sendMessage\"\n\t\t\t\t\t\t:disabled=\"isLoading || !inputText.trim()\">\n\t\t\t\t\t\t<text class=\"send-text\">{{ isLoading ? '发送中' : '发送' }}</text>\n\t\t\t\t\t</button>\n\t\t\t\t</template>\n\t\t\t\t\n\t\t\t\t<!-- 语音输入模式 -->\n\t\t\t\t<template v-if=\"isVoiceMode\">\n\t\t\t\t\t<button \n\t\t\t\t\t\tclass=\"voice-btn\" \n\t\t\t\t\t\t@touchstart=\"startVoiceRecording\"\n\t\t\t\t\t\t@touchend=\"stopVoiceRecording\"\n\t\t\t\t\t\t@touchcancel=\"stopVoiceRecording\"\n\t\t\t\t\t\t:disabled=\"isLoading\"\n\t\t\t\t\t\t:class=\"{ 'recording': isRecording }\">\n\t\t\t\t\t\t<text class=\"voice-text\">{{ isRecording ? '松开 结束' : '按住 说话' }}</text>\n\t\t\t\t\t</button>\n\t\t\t\t</template>\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script>\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tmessages: [],\n\t\t\t\tinputText: '',\n\t\t\t\tisLoading: false,\n\t\t\t\tscrollTop: 0,\n\t\t\t\taiConfig: null,\n\t\t\t\t// 语音识别相关\n\t\t\t\tisRecording: false,\n\t\t\t\tisVoiceMode: false, // 语音输入模式切换\n\t\t\t\tvoiceConfig: null,\n\t\t\t\trecordManager: null,\n\t\t\t\ttempAudioPath: ''\n\t\t\t}\n\t\t},\n\t\t\n\t\tonLoad() {\n\t\t\tthis.loadAIConfig()\n\t\t\tthis.loadVoiceConfig()\n\t\t\tthis.loadChatHistory()\n\t\t},\n\t\t\n\t\tmethods: {\n\t\t\t// 申请麦克风权限\n\t\t\tasync requestMicrophonePermission() {\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\t// 检查是否支持权限申请API\n\t\t\t\t\tif (uni.authorize) {\n\t\t\t\t\t\tuni.authorize({\n\t\t\t\t\t\t\tscope: 'scope.record',\n\t\t\t\t\t\t\tsuccess: () => {\n\t\t\t\t\t\t\t\tconsole.log('麦克风权限获取成功')\n\t\t\t\t\t\t\t\tresolve()\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tfail: (error) => {\n\t\t\t\t\t\t\t\tconsole.log('麦克风权限获取失败:', error)\n\t\t\t\t\t\t\t\t// 权限被拒绝，引导用户手动开启\n\t\t\t\t\t\t\t\treject(new Error('permission_denied'))\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t} else if (uni.getSetting && uni.authorize) {\n\t\t\t\t\t\t// 先检查当前权限状态\n\t\t\t\t\t\tuni.getSetting({\n\t\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\t\tif (res.authSetting['scope.record']) {\n\t\t\t\t\t\t\t\t\t// 已有权限\n\t\t\t\t\t\t\t\t\tresolve()\n\t\t\t\t\t\t\t\t} else if (res.authSetting['scope.record'] === false) {\n\t\t\t\t\t\t\t\t\t// 权限被拒绝，需要引导用户手动开启\n\t\t\t\t\t\t\t\t\treject(new Error('permission_denied'))\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t// 尚未授权，主动申请\n\t\t\t\t\t\t\t\t\tuni.authorize({\n\t\t\t\t\t\t\t\t\t\tscope: 'scope.record',\n\t\t\t\t\t\t\t\t\t\tsuccess: () => {\n\t\t\t\t\t\t\t\t\t\t\tresolve()\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tfail: () => {\n\t\t\t\t\t\t\t\t\t\t\treject(new Error('permission_denied'))\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tfail: () => {\n\t\t\t\t\t\t\t\t// 降级处理，直接尝试申请权限\n\t\t\t\t\t\t\t\tuni.authorize({\n\t\t\t\t\t\t\t\t\tscope: 'scope.record',\n\t\t\t\t\t\t\t\t\tsuccess: () => {\n\t\t\t\t\t\t\t\t\t\tresolve()\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tfail: () => {\n\t\t\t\t\t\t\t\t\t\treject(new Error('permission_denied'))\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// 在不支持权限API的环境中，直接通过\n\t\t\t\t\t\tconsole.log('当前环境不支持权限检查，直接通过')\n\t\t\t\t\t\tresolve()\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\t\n\t\t\t// 切换输入模式\n\t\t\ttoggleInputMode() {\n\t\t\t\tthis.isVoiceMode = !this.isVoiceMode\n\t\t\t},\n\t\t\t\n\t\t\t// 加载语音识别配置\n\t\t\tloadVoiceConfig() {\n\t\t\t\tthis.voiceConfig = uni.getStorageSync('voiceConfig')\n\t\t\t},\n\t\t\t\n\t\t\t// 开始语音录制\n\t\t\tasync startVoiceRecording() {\n\t\t\t\t// 首先申请麦克风权限\n\t\t\t\ttry {\n\t\t\t\t\tawait this.requestMicrophonePermission()\n\t\t\t\t} catch (error) {\n\t\t\t\t\tlet title = '需要麦克风权限'\n\t\t\t\t\tlet content = '使用语音记账功能需要麦克风权限'\n\t\t\t\t\t\n\t\t\t\t\tif (error.message === 'permission_denied') {\n\t\t\t\t\t\ttitle = '麦克风权限被拒绝'\n\t\t\t\t\t\tcontent = '检测到麦克风权限被拒绝，请手动开启权限后重试'\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\ttitle: title,\n\t\t\t\t\t\tcontent: content,\n\t\t\t\t\t\tconfirmText: '了解',\n\t\t\t\t\t\tshowCancel: false,\n\t\t\t\t\t\tsuccess: () => {\n\t\t\t\t\t\t\t// 显示操作指引\n\t\t\t\t\t\t\tconst systemInfo = uni.getSystemInfoSync()\n\t\t\t\t\t\t\tlet guide = ''\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif (systemInfo.platform === 'ios') {\n\t\t\t\t\t\t\t\tguide = 'iOS用户：设置 → 隐私与安全 → 麦克风 → 找到本应用并开启'\n\t\t\t\t\t\t\t} else if (systemInfo.platform === 'android') {\n\t\t\t\t\t\t\t\tguide = 'Android用户：设置 → 应用管理 → 本应用 → 权限管理 → 开启麦克风权限'\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tguide = '请在系统设置中为本应用开启麦克风权限'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\ttitle: guide,\n\t\t\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\t\t\tduration: 4000\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tthis.loadVoiceConfig();\n\t\t\t\tif (!this.voiceConfig) {\n\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\ttitle: '需要配置语音识别',\n\t\t\t\t\t\tcontent: '请先在\"我的\"页面配置语音识别服务，才能使用语音记账功能',\n\t\t\t\t\t\tconfirmText: '去配置',\n\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\t\tuni.navigateTo({\n\t\t\t\t\t\t\t\t\turl: '/pages/voice-config/voice-config'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (!this.voiceConfig.appId || !this.voiceConfig.accessKey) {\n\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\ttitle: '配置不完整',\n\t\t\t\t\t\tcontent: '需要配置App ID和Access Key才能使用语音识别功能',\n\t\t\t\t\t\tconfirmText: '去配置',\n\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\t\tuni.navigateTo({\n\t\t\t\t\t\t\t\t\turl: '/pages/voice-config/voice-config'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (!uni.getRecorderManager) {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '当前环境不支持录音功能',\n\t\t\t\t\t\ticon: 'error'\n\t\t\t\t\t})\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.isRecording = true\n\t\t\t\tthis.recordManager = uni.getRecorderManager()\n\t\t\t\t\n\t\t\t\tthis.recordManager.onStart(() => {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '开始录音...',\n\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\tduration: 1000\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t\t\n\t\t\t\tthis.recordManager.onStop((res) => {\n\t\t\t\t\tthis.tempAudioPath = res.tempFilePath\n\t\t\t\t\tif (!res.tempFilePath) {\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: '录音文件无效，请重试',\n\t\t\t\t\t\t\ticon: 'error'\n\t\t\t\t\t\t})\n\t\t\t\t\t\tthis.isRecording = false\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t\tthis.processVoiceRecording()\n\t\t\t\t})\n\t\t\t\t\n\t\t\t\tthis.recordManager.onError((error) => {\n\t\t\t\t\tthis.isRecording = false\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '录音失败，请重试',\n\t\t\t\t\t\ticon: 'error'\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t\t\n\t\t\t\tthis.recordManager.start({\n\t\t\t\t\tduration: 60000,\n\t\t\t\t\tsampleRate: 16000,\n\t\t\t\t\tnumberOfChannels: 1,\n\t\t\t\t\tencodeBitRate: 96000,\n\t\t\t\t\tformat: 'wav'\n\t\t\t\t})\n\t\t\t},\n\t\t\t\n\t\t\t// 停止语音录制\n\t\t\tstopVoiceRecording() {\n\t\t\t\tif (!this.isRecording) return\n\t\t\t\tthis.isRecording = false\n\t\t\t\tif (this.recordManager) {\n\t\t\t\t\tthis.recordManager.stop()\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t// 处理语音录制结果\n\t\t\tasync processVoiceRecording() {\n\t\t\t\tif (!this.tempAudioPath) {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '录音文件无效',\n\t\t\t\t\t\ticon: 'error'\n\t\t\t\t\t})\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tuni.showLoading({\n\t\t\t\t\ttitle: '正在识别语音...'\n\t\t\t\t})\n\t\t\t\t\n\t\t\t\ttry {\n\t\t\t\t\tconst recognizedText = await this.callFlashAPI()\n\t\t\t\t\tuni.hideLoading()\n\t\t\t\t\t\n\t\t\t\t\tif (recognizedText) {\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: '语音识别成功',\n\t\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t\t})\n\t\t\t\t\t\tawait this.sendMessage(null,recognizedText)\n\t\t\t\t\t} else {\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: '未识别到有效内容',\n\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\tuni.hideLoading()\n\t\t\t\t\t\n\t\t\t\t\tlet errorMessage = '语音识别失败，请重试'\n\t\t\t\t\tlet showConfigModal = false\n\t\t\t\t\t\n\t\t\t\t\tif (error.message.includes('grant not found') || error.message.includes('验证失败')) {\n\t\t\t\t\t\terrorMessage = '语音识别配置错误，请前往设置页面重新配置'\n\t\t\t\t\t\tshowConfigModal = true\n\t\t\t\t\t} else if (error.message.includes('不支持') || error.message.includes('无法读取')) {\n\t\t\t\t\t\terrorMessage = '当前环境不支持语音功能，建议使用文字输入'\n\t\t\t\t\t} else if (error.message.includes('网络') || error.message.includes('timeout')) {\n\t\t\t\t\t\terrorMessage = '网络连接问题，请检查网络后重试'\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (showConfigModal) {\n\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\ttitle: '配置错误',\n\t\t\t\t\t\t\tcontent: errorMessage + '\\n\\n点击确认前往配置页面',\n\t\t\t\t\t\t\tconfirmText: '去配置',\n\t\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\t\t\tuni.navigateTo({\n\t\t\t\t\t\t\t\t\t\turl: '/pages/voice-config/voice-config'\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t} else {\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: errorMessage,\n\t\t\t\t\t\t\ticon: 'error'\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t// 使用Flash API进行语音识别\n\t\t\tasync callFlashAPI() {\n\t\t\t\tconst recognizeUrl = \"https://openspeech.bytedance.com/api/v3/auc/bigmodel/recognize/flash\"\n\t\t\t\tconst audioBase64 = await this.getAudioBase64()\n\t\t\t\t\n\t\t\t\tconst headers = {\n\t\t\t\t\t\"X-Api-App-Key\": this.voiceConfig.appId,\n\t\t\t\t\t\"X-Api-Access-Key\": this.voiceConfig.accessKey,\n\t\t\t\t\t\"X-Api-Resource-Id\": \"volc.bigasr.auc_turbo\",\n\t\t\t\t\t\"X-Api-Request-Id\": this.generateUUID(),\n\t\t\t\t\t\"X-Api-Sequence\": \"-1\",\n\t\t\t\t\t\"Content-Type\": \"application/json\"\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tconst requestData = {\n\t\t\t\t\tuser: {\n\t\t\t\t\t\tuid: this.voiceConfig.appId\n\t\t\t\t\t},\n\t\t\t\t\taudio: {\n\t\t\t\t\t\tdata: audioBase64\n\t\t\t\t\t},\n\t\t\t\t\trequest: {\n\t\t\t\t\t\tmodel_name: this.voiceConfig.modelName || \"bigmodel\",\n\t\t\t\t\t\tenable_itn: this.voiceConfig.enableItn !== false,\n\t\t\t\t\t\tenable_punc: this.voiceConfig.enablePunc !== false,\n\t\t\t\t\t\tenable_ddc: true,\n\t\t\t\t\t\tenable_speaker_info: this.voiceConfig.enableSpeakerInfo || false\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tconst response = await uni.request({\n\t\t\t\t\turl: recognizeUrl,\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\theader: headers,\n\t\t\t\t\tdata: requestData,\n\t\t\t\t\ttimeout: 30000\n\t\t\t\t})\n\t\t\t\t\n\t\t\t\tif (response.statusCode === 200) {\n\t\t\t\t\tconst statusCode = response.header['X-Api-Status-Code']\n\t\t\t\t\tif (statusCode === '20000000') {\n\t\t\t\t\t\tconst result = response.data\n\t\t\t\t\t\tlet recognizedText = ''\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (result && result.result && result.result.text) {\n\t\t\t\t\t\t\trecognizedText = result.result.text\n\t\t\t\t\t\t} else if (result && result.data && result.data.result && result.data.result.text) {\n\t\t\t\t\t\t\trecognizedText = result.data.result.text\n\t\t\t\t\t\t} else if (result && result.utterances && result.utterances.length > 0) {\n\t\t\t\t\t\t\trecognizedText = result.utterances.map(item => item.text).join('')\n\t\t\t\t\t\t} else if (result && result.text) {\n\t\t\t\t\t\t\trecognizedText = result.text\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\treturn recognizedText.trim() || null\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrow new Error(`语音识别失败: ${response.header['X-Api-Message'] || '未知错误'}`)\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthrow new Error(`API调用失败: HTTP ${response.statusCode}`)\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t// 获取录音文件的Base64编码\n\t\t\tasync getAudioBase64() {\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\tif (uni.getFileSystemManager) {\n\t\t\t\t\t\tuni.getFileSystemManager().readFile({\n\t\t\t\t\t\t\tfilePath: this.tempAudioPath,\n\t\t\t\t\t\t\tencoding: 'base64',\n\t\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\t\tresolve(res.data)\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tfail: (error) => {\n\t\t\t\t\t\t\t\tthis.getAudioBase64Fallback().then(resolve).catch(reject)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.getAudioBase64Fallback().then(resolve).catch(reject)\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\t\n\t\t\t// 备用方案：使用 plus.io 读取文件\n\t\t\tasync getAudioBase64Fallback() {\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\tif (typeof plus !== 'undefined' && plus.io) {\n\t\t\t\t\t\tplus.io.resolveLocalFileSystemURL(this.tempAudioPath, (entry) => {\n\t\t\t\t\t\t\tentry.file((file) => {\n\t\t\t\t\t\t\t\tconst reader = new plus.io.FileReader()\n\t\t\t\t\t\t\t\treader.onloadend = (evt) => {\n\t\t\t\t\t\t\t\t\tif (evt.target.result) {\n\t\t\t\t\t\t\t\t\t\tconst base64Data = evt.target.result.split(',')[1] || evt.target.result\n\t\t\t\t\t\t\t\t\t\tresolve(base64Data)\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\treject(new Error('文件读取结果为空'))\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treader.onerror = () => {\n\t\t\t\t\t\t\t\t\treject(new Error('FileReader读取失败'))\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treader.readAsDataURL(file)\n\t\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\t\treject(new Error('获取文件对象失败'))\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\treject(new Error('解析文件路径失败'))\n\t\t\t\t\t\t})\n\t\t\t\t\t} else {\n\t\t\t\t\t\treject(new Error('当前环境无法读取录音文件，建议使用文字输入'))\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\t\n\t\t\t// 生成UUID\n\t\t\tgenerateUUID() {\n\t\t\t\treturn 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n\t\t\t\t\tconst r = Math.random() * 16 | 0\n\t\t\t\t\tconst v = c === 'x' ? r : (r & 0x3 | 0x8)\n\t\t\t\t\treturn v.toString(16)\n\t\t\t\t})\n\t\t\t},\n\t\t\t\n\t\t\t// 加载AI配置\n\t\t\tloadAIConfig() {\n\t\t\t\tthis.aiConfig = uni.getStorageSync('aiConfig')\n\t\t\t\tif (!this.aiConfig || !this.aiConfig.apiUrl || !this.aiConfig.apiKey) {\n\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\ttitle: '需要配置AI',\n\t\t\t\t\t\tcontent: '请先在\"我的\"页面配置智能体，才能使用聊天记账功能',\n\t\t\t\t\t\tconfirmText: '去配置',\n\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\t\tuni.navigateTo({\n\t\t\t\t\t\t\t\t\turl: '/pages/ai-config/ai-config'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tuni.navigateBack()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t// 加载聊天历史\n\t\t\tloadChatHistory() {\n\t\t\t\tconst history = uni.getStorageSync('chatHistory') || []\n\t\t\t\tthis.messages = history\n\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\tthis.scrollToBottom()\n\t\t\t\t})\n\t\t\t},\n\t\t\t\n\t\t\t// 保存聊天历史\n\t\t\tsaveChatHistory() {\n\t\t\t\t// 只保存最近50条消息\n\t\t\t\tconst historyToSave = this.messages.slice(-50)\n\t\t\t\tuni.setStorageSync('chatHistory', historyToSave)\n\t\t\t},\n\t\t\t\n\t\t\t// 快捷输入\n\t\t\tquickInput(text) {\n\t\t\t\tthis.inputText = text\n\t\t\t\tthis.sendMessage()\n\t\t\t},\n\t\t\t\n\t\t\t// 清空聊天记录\n\t\t\tclearChatHistory() {\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: '清空聊天记录',\n\t\t\t\t\tcontent: '确定要清空所有聊天记录吗？此操作不可恢复。',\n\t\t\t\t\tconfirmText: '确定清空',\n\t\t\t\t\tcancelText: '取消',\n\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\tthis.messages = []\n\t\t\t\t\t\t\tuni.removeStorageSync('chatHistory')\n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\ttitle: '聊天记录已清空',\n\t\t\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\t\n\t\t\t// 发送消息\n\t\t\tasync sendMessage(dom,messageText = null) {\n\t\t\t\tconst message = (messageText || this.inputText).trim()\n\t\t\t\tif (!message || this.isLoading) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.addMessage('user', message)\n\t\t\t\t\n\t\t\t\tif (!messageText) {\n\t\t\t\t\tthis.inputText = ''\n\t\t\t\t}\n\t\t\t\tthis.loadAIConfig()\n\t\t\t\tif (!this.aiConfig) {\n\t\t\t\t\tthis.addMessage('assistant', '抱歉，AI配置未找到，请在设置中重新配置')\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.isLoading = true\n\t\t\t\t\n\t\t\t\ttry {\n\t\t\t\t\tconst response = await this.callAI(message)\n\t\t\t\t\tthis.handleAIResponse(response, message)\n\t\t\t\t} catch (error) {\n\t\t\t\t\tthis.addMessage('assistant', '抱歉，AI服务暂时不可用，请稍后再试或检查网络连接')\n\t\t\t\t} finally {\n\t\t\t\t\tthis.isLoading = false\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t// 调用AI接口\n\t\t\tasync callAI(userMessage) {\n\t\t\t\t// 获取当前可用的分类信息\n\t\t\t\tconst expenseCategories = uni.getStorageSync('expenseCategories') || []\n\t\t\t\tconst incomeCategories = uni.getStorageSync('incomeCategories') || []\n\t\t\t\t\n\t\t\t\t// 构建分类信息文本\n\t\t\t\tconst expenseNames = expenseCategories.map(cat => cat.name).join('、')\n\t\t\t\tconst incomeNames = incomeCategories.map(cat => cat.name).join('、')\n\t\t\t\t\n\t\t\t\tlet categoryInfo = ''\n\t\t\t\tif (expenseNames || incomeNames) {\n\t\t\t\t\tcategoryInfo = '\\n\\n当前可用分类：'\n\t\t\t\t\tif (expenseNames) {\n\t\t\t\t\t\tcategoryInfo += `\\n支出类别：${expenseNames}`\n\t\t\t\t\t}\n\t\t\t\t\tif (incomeNames) {\n\t\t\t\t\t\tcategoryInfo += `\\n收入类别：${incomeNames}`\n\t\t\t\t\t}\n\t\t\t\t\tcategoryInfo += '\\n\\n请优先从上述分类中选择最合适的，避免创建重复或相似的分类。'\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tconst systemPrompt = (this.aiConfig.systemPrompt || '你是一个智能记账助手') + categoryInfo\n\t\t\t\t\n\t\t\t\tconst messages = [\n\t\t\t\t\t{\n\t\t\t\t\t\trole: 'system',\n\t\t\t\t\t\tcontent: systemPrompt\n\t\t\t\t\t},\n\t\t\t\t\t// 包含最近的对话历史（最多10条）\n\t\t\t\t\t...this.messages.slice(-10).map(msg => ({\n\t\t\t\t\t\trole: msg.role,\n\t\t\t\t\t\tcontent: msg.content\n\t\t\t\t\t})),\n\t\t\t\t\t{\n\t\t\t\t\t\trole: 'user',\n\t\t\t\t\t\tcontent: userMessage\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t\t\n\t\t\t\tconst requestData = {\n\t\t\t\t\tmodel: this.aiConfig.modelName || 'gpt-3.5-turbo',\n\t\t\t\t\tmessages: messages,\n\t\t\t\t\tmax_tokens: 500,\n\t\t\t\t\ttemperature: 0.7\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tconst response = await uni.request({\n\t\t\t\t\turl: this.aiConfig.apiUrl,\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\theader: {\n\t\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t\t'Authorization': `Bearer ${this.aiConfig.apiKey}`\n\t\t\t\t\t},\n\t\t\t\t\tdata: requestData,\n\t\t\t\t\ttimeout: 30000\n\t\t\t\t})\n\t\t\t\t\n\t\t\t\tif (response.statusCode !== 200) {\n\t\t\t\t\tthrow new Error(`HTTP ${response.statusCode}: ${response.data?.error?.message || '请求失败'}`)\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn response.data\n\t\t\t},\n\t\t\t\n\t\t\t// 处理AI响应\n\t\t\thandleAIResponse(response, userMessage) {\n\t\t\t\tconst aiReply = response.choices?.[0]?.message?.content || '抱歉，我没有理解你的意思'\n\t\t\t\t\n\t\t\t\t// 尝试解析记账信息（支持单笔或多笔）\n\t\t\t\tconst recordsData = this.parseRecordsData(aiReply)\n\t\t\t\t\n\t\t\t\tif (recordsData && recordsData.length > 0) {\n\t\t\t\t\t// 包含记账信息的回复 - 清理掉JSON代码块和对象\n\t\t\t\t\tlet replyText = aiReply\n\t\t\t\t\t\t.replace(/```(?:json)?\\s*\\{[\\s\\S]*?\\}\\s*```/g, '') // 移除JSON代码块\n\t\t\t\t\t\t.replace(/```(?:json)?\\s*\\[[\\s\\S]*?\\]\\s*```/g, '') // 移除JSON数组代码块\n\t\t\t\t\t\t.replace(/\\{[\\s\\S]*?\"type\"\\s*:\\s*\"(expense|income)\"[\\s\\S]*?\\}/g, '') // 移除JSON对象\n\t\t\t\t\t\t.replace(/\\n\\s*\\n/g, '\\n') // 清理多余的空行\n\t\t\t\t\t\t.trim()\n\t\t\t\t\t\n\t\t\t\t\t// 如果清理后没有文本，使用默认文本\n\t\t\t\t\tif (!replyText) {\n\t\t\t\t\t\treplyText = `我帮你识别了${recordsData.length}笔记录：`\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tthis.addMessage('assistant', replyText, recordsData)\n\t\t\t\t} else {\n\t\t\t\t\t// 普通对话回复\n\t\t\t\t\tthis.addMessage('assistant', aiReply)\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t// 解析记账数据（支持单笔和多笔）\n\t\t\tparseRecordsData(text) {\n\t\t\t\ttry {\n\t\t\t\t\t// 先尝试提取markdown代码块中的JSON\n\t\t\t\t\tconst codeBlockMatch = text.match(/```(?:json)?\\s*(\\{[\\s\\S]*?\\}|\\[[\\s\\S]*?\\])\\s*```/);\n\t\t\t\t\tif (codeBlockMatch) {\n\t\t\t\t\t\tlet jsonStr = codeBlockMatch[1].trim()\n\t\t\t\t\t\t// 处理转义字符\n\t\t\t\t\t\tjsonStr = this.unescapeJsonString(jsonStr)\n\t\t\t\t\t\tconst data = JSON.parse(jsonStr)\n\t\t\t\t\t\tif (Array.isArray(data)) {\n\t\t\t\t\t\t\tconst validRecords = data.filter(item => this.validateRecordData(item))\n\t\t\t\t\t\t\treturn validRecords.length > 0 ? validRecords : null\n\t\t\t\t\t\t} else if (this.validateRecordData(data)) {\n\t\t\t\t\t\t\treturn [data]\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// 尝试使用更强的正则表达式提取JSON对象\n\t\t\t\t\tconst strongObjectMatch = text.match(/\\{[\\s\\S]*?\"type\"\\s*:\\s*\"(expense|income)\"[\\s\\S]*?\\}/);\n\t\t\t\t\tif (strongObjectMatch) {\n\t\t\t\t\t\tlet objectStr = strongObjectMatch[0]\n\t\t\t\t\t\tobjectStr = this.unescapeJsonString(objectStr)\n\t\t\t\t\t\tconst data = JSON.parse(objectStr)\n\t\t\t\t\t\tif (this.validateRecordData(data)) {\n\t\t\t\t\t\t\treturn [data]\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// 尝试匹配更宽松的JSON对象（包含换行符）\n\t\t\t\t\tconst flexibleObjectMatch = text.match(/\\{[^{}]*?\"type\"[^{}]*?\"(expense|income)\"[^{}]*?\\}/s);\n\t\t\t\t\tif (flexibleObjectMatch) {\n\t\t\t\t\t\tlet objectStr = flexibleObjectMatch[0]\n\t\t\t\t\t\tobjectStr = this.unescapeJsonString(objectStr)\n\t\t\t\t\t\tconst data = JSON.parse(objectStr)\n\t\t\t\t\t\tif (this.validateRecordData(data)) {\n\t\t\t\t\t\t\treturn [data]\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// 尝试匹配数组格式\n\t\t\t\t\tconst arrayMatch = text.match(/\\[[^\\]]*\\]/);\n\t\t\t\t\tif (arrayMatch) {\n\t\t\t\t\t\tlet arrayStr = arrayMatch[0]\n\t\t\t\t\t\tarrayStr = this.unescapeJsonString(arrayStr)\n\t\t\t\t\t\tconst dataArray = JSON.parse(arrayStr)\n\t\t\t\t\t\tif (Array.isArray(dataArray) && dataArray.length > 0) {\n\t\t\t\t\t\t\tconst validRecords = dataArray.filter(item => this.validateRecordData(item))\n\t\t\t\t\t\t\treturn validRecords.length > 0 ? validRecords : null\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// 尝试匹配对象格式（最后尝试，较宽松）\n\t\t\t\t\tconst objectMatch = text.match(/\\{[^}]*\\}/);\n\t\t\t\t\tif (objectMatch) {\n\t\t\t\t\t\tlet objectStr = objectMatch[0]\n\t\t\t\t\t\tobjectStr = this.unescapeJsonString(objectStr)\n\t\t\t\t\t\tconst data = JSON.parse(objectStr)\n\t\t\t\t\t\tif (this.validateRecordData(data)) {\n\t\t\t\t\t\t\treturn [data]\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.log('JSON解析失败:', error.message)\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn null\n\t\t\t},\n\t\t\t\n\t\t\t// 处理JSON字符串中的转义字符\n\t\t\tunescapeJsonString(str) {\n\t\t\t\t// 将常见的转义字符还原\n\t\t\t\treturn str.replace(/\\\\\"/g, '\"')\n\t\t\t\t\t\t  .replace(/\\\\'/g, \"'\")\n\t\t\t\t\t\t  .replace(/\\\\n/g, '\\n')\n\t\t\t\t\t\t  .replace(/\\\\t/g, '\\t')\n\t\t\t\t\t\t  .replace(/\\\\r/g, '\\r')\n\t\t\t\t\t\t  .replace(/\\\\\\\\/g, '\\\\')\n\t\t\t},\n\t\t\t\n\t\t\t// 验证记录数据\n\t\t\tvalidateRecordData(data) {\n\t\t\t\treturn data && data.type && data.amount && data.category\n\t\t\t},\n\t\t\t\n\t\t\t// 添加消息\n\t\t\taddMessage(role, content, recordsData = null) {\n\t\t\t\tconst message = {\n\t\t\t\t\trole,\n\t\t\t\t\tcontent,\n\t\t\t\t\ttimestamp: Date.now(),\n\t\t\t\t\trecordsData,\n\t\t\t\t\trecorded: false\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.messages.push(message)\n\t\t\t\tthis.saveChatHistory()\n\t\t\t\t\n\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\tthis.scrollToBottom()\n\t\t\t\t})\n\t\t\t},\n\t\t\t\n\t\t\t// 确认多笔记录\n\t\t\tasync confirmMultipleRecords(recordsData) {\n\t\t\t\tconst results = []\n\t\t\t\tconst newCategories = []\n\t\t\t\t\n\t\t\t\tfor (const recordData of recordsData) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst result = await this.processRecord(recordData)\n\t\t\t\t\t\tresults.push(result)\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (result.isNewCategory) {\n\t\t\t\t\t\t\tnewCategories.push(result.category)\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tresults.push({ success: false, error: error.message })\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (newCategories.length > 0) {\n\t\t\t\t\tawait this.handleNewCategories(newCategories)\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tconst messageIndex = this.messages.findIndex(msg => \n\t\t\t\t\tmsg.recordsData === recordsData\n\t\t\t\t)\n\t\t\t\tif (messageIndex !== -1) {\n\t\t\t\t\tthis.messages[messageIndex].recorded = true\n\t\t\t\t\tthis.saveChatHistory()\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tconst successCount = results.filter(r => r.success).length\n\t\t\t\tif (successCount === recordsData.length) {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: `成功记录${successCount}笔！`,\n\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t})\n\t\t\t\t\tthis.addMessage('assistant', `✅ 记账成功！已记录${successCount}笔账目`)\n\t\t\t\t} else {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: `记录${successCount}/${recordsData.length}笔`,\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t// 处理单条记录\n\t\t\tasync processRecord(recordData) {\n\t\t\t\treturn new Promise((resolve) => {\n\t\t\t\t\t// 解析时间\n\t\t\t\t\tconst recordTime = this.parseRecordTime(recordData.time)\n\t\t\t\t\t\n\t\t\t\t\t// 检查分类是否存在\n\t\t\t\t\tconst { categoryIcon, isNewCategory, categoryId } = this.getCategoryIconWithCheck(\n\t\t\t\t\t\trecordData.category, \n\t\t\t\t\t\trecordData.type\n\t\t\t\t\t)\n\t\t\t\t\t\n\t\t\t\t\t// 生成记录ID\n\t\t\t\t\tconst recordId = Date.now() + Math.random() * 1000\n\t\t\t\t\t\n\t\t\t\t\t// 创建记录对象\n\t\t\t\t\tconst newRecord = {\n\t\t\t\t\t\tid: recordId,\n\t\t\t\t\t\ttype: recordData.type,\n\t\t\t\t\t\tamount: parseFloat(recordData.amount).toString(),\n\t\t\t\t\t\tcategoryName: recordData.category,\n\t\t\t\t\t\tcategoryId: categoryId, // 添加分类ID关联\n\t\t\t\t\t\tcategoryIcon: categoryIcon,\n\t\t\t\t\t\tnote: recordData.note || '',\n\t\t\t\t\t\ttime: recordTime.toISOString()\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// 保存到本地存储\n\t\t\t\t\tconst records = uni.getStorageSync('records') || []\n\t\t\t\t\trecords.push(newRecord)\n\t\t\t\t\tuni.setStorageSync('records', records)\n\t\t\t\t\t\n\t\t\t\t\tresolve({ \n\t\t\t\t\t\tsuccess: true, \n\t\t\t\t\t\trecord: newRecord,\n\t\t\t\t\t\tisNewCategory,\n\t\t\t\t\t\tcategory: isNewCategory ? {\n\t\t\t\t\t\t\tname: recordData.category,\n\t\t\t\t\t\t\ticon: categoryIcon,\n\t\t\t\t\t\t\ttype: recordData.type\n\t\t\t\t\t\t} : null\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t},\n\t\t\t\n\t\t\t// 解析记录时间\n\t\t\tparseRecordTime(timeDescription) {\n\t\t\t\tconst now = new Date()\n\t\t\t\t\n\t\t\t\tif (!timeDescription || timeDescription === '刚才') {\n\t\t\t\t\treturn now\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 解析相对时间\n\t\t\t\tif (timeDescription.includes('今天')) {\n\t\t\t\t\tif (timeDescription.includes('早上') || timeDescription.includes('上午')) {\n\t\t\t\t\t\treturn new Date(now.getFullYear(), now.getMonth(), now.getDate(), 8, 0)\n\t\t\t\t\t} else if (timeDescription.includes('中午')) {\n\t\t\t\t\t\treturn new Date(now.getFullYear(), now.getMonth(), now.getDate(), 12, 0)\n\t\t\t\t\t} else if (timeDescription.includes('下午')) {\n\t\t\t\t\t\treturn new Date(now.getFullYear(), now.getMonth(), now.getDate(), 15, 0)\n\t\t\t\t\t} else if (timeDescription.includes('晚上')) {\n\t\t\t\t\t\treturn new Date(now.getFullYear(), now.getMonth(), now.getDate(), 19, 0)\n\t\t\t\t\t}\n\t\t\t\t} else if (timeDescription.includes('昨天')) {\n\t\t\t\t\tconst yesterday = new Date(now)\n\t\t\t\t\tyesterday.setDate(now.getDate() - 1)\n\t\t\t\t\t\n\t\t\t\t\tif (timeDescription.includes('早上') || timeDescription.includes('上午')) {\n\t\t\t\t\t\treturn new Date(yesterday.getFullYear(), yesterday.getMonth(), yesterday.getDate(), 8, 0)\n\t\t\t\t\t} else if (timeDescription.includes('中午')) {\n\t\t\t\t\t\treturn new Date(yesterday.getFullYear(), yesterday.getMonth(), yesterday.getDate(), 12, 0)\n\t\t\t\t\t} else if (timeDescription.includes('下午')) {\n\t\t\t\t\t\treturn new Date(yesterday.getFullYear(), yesterday.getMonth(), yesterday.getDate(), 15, 0)\n\t\t\t\t\t} else if (timeDescription.includes('晚上')) {\n\t\t\t\t\t\treturn new Date(yesterday.getFullYear(), yesterday.getMonth(), yesterday.getDate(), 19, 0)\n\t\t\t\t\t}\n\t\t\t\t} else if (timeDescription.includes('前天')) {\n\t\t\t\t\tconst dayBeforeYesterday = new Date(now)\n\t\t\t\t\tdayBeforeYesterday.setDate(now.getDate() - 2)\n\t\t\t\t\treturn new Date(dayBeforeYesterday.getFullYear(), dayBeforeYesterday.getMonth(), dayBeforeYesterday.getDate(), 12, 0)\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 默认返回当前时间\n\t\t\t\treturn now\n\t\t\t},\n\t\t\t\n\t\t\t// 确认单笔记录（从多笔记录中）\n\t\t\tasync confirmSingleRecord(record, recordIndex, message) {\n\t\t\t\ttry {\n\t\t\t\t\tconst { categoryIcon, isNewCategory, categoryId } = this.getCategoryIconWithCheck(\n\t\t\t\t\t\trecord.category, \n\t\t\t\t\t\trecord.type\n\t\t\t\t\t)\n\t\t\t\t\t\n\t\t\t\t\tlet finalCategoryId = categoryId\n\t\t\t\t\tif (isNewCategory) {\n\t\t\t\t\t\tconst newCategory = {\n\t\t\t\t\t\t\tname: record.category,\n\t\t\t\t\t\t\ticon: categoryIcon,\n\t\t\t\t\t\t\ttype: record.type\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst addedCategories = await this.handleNewCategories([newCategory])\n\t\t\t\t\t\tif (addedCategories && addedCategories.length > 0) {\n\t\t\t\t\t\t\tfinalCategoryId = addedCategories[0].id\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tconst recordTime = this.parseRecordTime(record.time)\n\t\t\t\t\tconst recordId = Date.now() + Math.random() * 1000\n\t\t\t\t\t\n\t\t\t\t\tconst newRecord = {\n\t\t\t\t\t\tid: recordId,\n\t\t\t\t\t\ttype: record.type,\n\t\t\t\t\t\tamount: parseFloat(record.amount).toString(),\n\t\t\t\t\t\tcategoryName: record.category,\n\t\t\t\t\t\tcategoryId: finalCategoryId,\n\t\t\t\t\t\tcategoryIcon: categoryIcon,\n\t\t\t\t\t\tnote: record.note || '',\n\t\t\t\t\t\ttime: recordTime.toISOString()\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tconst records = uni.getStorageSync('records') || []\n\t\t\t\t\trecords.push(newRecord)\n\t\t\t\t\tuni.setStorageSync('records', records)\n\t\t\t\t\t\n\t\t\t\t\tmessage.recordsData[recordIndex].recorded = true\n\t\t\t\t\t\n\t\t\t\t\tconst allRecorded = message.recordsData.every(r => r.recorded)\n\t\t\t\t\tif (allRecorded) {\n\t\t\t\t\t\tmessage.recorded = true\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tthis.saveChatHistory()\n\t\t\t\t\t\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '记账成功！',\n\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t})\n\t\t\t\t\t\n\t\t\t\t\tthis.addMessage('assistant', `✅ 已记录${record.type === 'expense' ? '支出' : '收入'}¥${record.amount} (${record.category})`)\n\t\t\t\t\t\n\t\t\t\t} catch (error) {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '记账失败，请重试',\n\t\t\t\t\t\ticon: 'error'\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t// 获取分类图标并检查是否为新分类\n\t\t\tgetCategoryIconWithCheck(categoryName, type) {\n\t\t\t\tconst expenseCategories = uni.getStorageSync('expenseCategories') || []\n\t\t\t\tconst incomeCategories = uni.getStorageSync('incomeCategories') || []\n\t\t\t\t\n\t\t\t\tconst allCategories = [...expenseCategories, ...incomeCategories]\n\t\t\t\tconst existingCategory = allCategories.find(cat => cat.name === categoryName)\n\t\t\t\t\n\t\t\t\tif (existingCategory) {\n\t\t\t\t\treturn { \n\t\t\t\t\t\tcategoryIcon: existingCategory.icon, \n\t\t\t\t\t\tcategoryId: existingCategory.id,\n\t\t\t\t\t\tisNewCategory: false \n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tconst newIcon = this.generateCategoryIcon(categoryName, type)\n\t\t\t\treturn { \n\t\t\t\t\tcategoryIcon: newIcon, \n\t\t\t\t\tcategoryId: null,\n\t\t\t\t\tisNewCategory: true \n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t// 生成新分类图标\n\t\t\tgenerateCategoryIcon(categoryName, type) {\n\t\t\t\tconst iconMap = {\n\t\t\t\t\t'早餐': '🥞', '午餐': '🍱', '晚餐': '🍽️', '夜宵': '🌙',\n\t\t\t\t\t'咖啡': '☕', '奶茶': '🧋', '饮料': '🥤',\n\t\t\t\t\t'打车': '🚗', '地铁': '🚇', '公交': '🚌', '油费': '⛽',\n\t\t\t\t\t'零食': '🍿', '水果': '🍎', '蔬菜': '🥬', '肉类': '🥩',\n\t\t\t\t\t'洗衣': '👕', '理发': '💇', '美容': '💄', '健身': '💪',\n\t\t\t\t\t'宠物': '🐱', '花卉': '🌸', '书籍': '📚', \n\t\t\t\t\t'兼职': '💼', '奖励': '🎁', '补贴': '💰'\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (iconMap[categoryName]) {\n\t\t\t\t\treturn iconMap[categoryName]\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tfor (const [key, icon] of Object.entries(iconMap)) {\n\t\t\t\t\tif (categoryName.includes(key) || key.includes(categoryName)) {\n\t\t\t\t\t\treturn icon\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn type === 'expense' ? '💰' : '💎'\n\t\t\t},\n\t\t\t\n\t\t\t// 处理新分类\n\t\t\tasync handleNewCategories(newCategories) {\n\t\t\t\tif (newCategories.length === 0) return null\n\t\t\t\t\n\t\t\t\tconst categoryNames = newCategories.map(cat => cat.name).join('、')\n\t\t\t\t\n\t\t\t\treturn new Promise((resolve) => {\n\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\ttitle: '发现新分类',\n\t\t\t\t\t\tcontent: `检测到新的消费分类：${categoryNames}\\n\\n是否要添加到分类管理中？`,\n\t\t\t\t\t\tconfirmText: '添加',\n\t\t\t\t\t\tcancelText: '跳过',\n\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\t\tconst addedCategories = this.addNewCategoriesToStorage(newCategories)\n\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\ttitle: '分类已添加',\n\t\t\t\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\tresolve(addedCategories) // 返回添加的分类信息（包含ID）\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tresolve(null) // 用户取消添加\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t},\n\t\t\t\n\t\t\t// 添加新分类到存储\n\t\t\taddNewCategoriesToStorage(newCategories) {\n\t\t\t\tconst expenseCategories = uni.getStorageSync('expenseCategories') || []\n\t\t\t\tconst incomeCategories = uni.getStorageSync('incomeCategories') || []\n\t\t\t\tconst addedCategories = []\n\t\t\t\t\n\t\t\t\tnewCategories.forEach((category, index) => {\n\t\t\t\t\tconst uniqueId = Date.now() + index * 1000 + Math.floor(Math.random() * 1000)\n\t\t\t\t\t\n\t\t\t\t\tconst newCategoryItem = {\n\t\t\t\t\t\tid: uniqueId,\n\t\t\t\t\t\tname: category.name,\n\t\t\t\t\t\ticon: category.icon\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (category.type === 'expense') {\n\t\t\t\t\t\texpenseCategories.push(newCategoryItem)\n\t\t\t\t\t} else {\n\t\t\t\t\t\tincomeCategories.push(newCategoryItem)\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\taddedCategories.push({\n\t\t\t\t\t\t...category,\n\t\t\t\t\t\tid: uniqueId\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t\t\n\t\t\t\tuni.setStorageSync('expenseCategories', expenseCategories)\n\t\t\t\tuni.setStorageSync('incomeCategories', incomeCategories)\n\t\t\t\t\n\t\t\t\treturn addedCategories\n\t\t\t},\n\t\t\t\n\t\t\t// 获取分类图标\n\t\t\tgetCategoryIcon(categoryName, type) {\n\t\t\t\tconst expenseIcons = {\n\t\t\t\t\t'餐饮': '🍽️', '交通': '🚗', '购物': '🛍️', '娱乐': '🎬', '住房': '🏠',\n\t\t\t\t\t'医疗': '💊', '教育': '📚', '通讯': '📱', '服装': '👕', '其他': '📦'\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tconst incomeIcons = {\n\t\t\t\t\t'工资': '💰', '奖金': '🎁', '投资': '📈', '兼职': '💼', \n\t\t\t\t\t'红包': '🧧', '退款': '↩️', '其他': '💎'\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (type === 'expense') {\n\t\t\t\t\treturn expenseIcons[categoryName] || '📦'\n\t\t\t\t} else {\n\t\t\t\t\treturn incomeIcons[categoryName] || '💎'\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t// 格式化时间\n\t\t\tformatTime(timestamp) {\n\t\t\t\tconst date = new Date(timestamp)\n\t\t\t\tconst now = new Date()\n\t\t\t\t\n\t\t\t\t// 获取今天、昨天、前天的日期（只比较年月日）\n\t\t\t\tconst today = new Date(now.getFullYear(), now.getMonth(), now.getDate())\n\t\t\t\tconst yesterday = new Date(today.getTime() - 24 * 60 * 60 * 1000)\n\t\t\t\tconst dayBeforeYesterday = new Date(today.getTime() - 2 * 24 * 60 * 60 * 1000)\n\t\t\t\t\n\t\t\t\tconst messageDate = new Date(date.getFullYear(), date.getMonth(), date.getDate())\n\t\t\t\t\n\t\t\t\t// 格式化时分\n\t\t\t\tconst hours = date.getHours().toString().padStart(2, '0')\n\t\t\t\tconst minutes = date.getMinutes().toString().padStart(2, '0')\n\t\t\t\tconst timeStr = `${hours}:${minutes}`\n\t\t\t\t\n\t\t\t\t// 根据日期判断显示格式\n\t\t\t\tif (messageDate.getTime() === today.getTime()) {\n\t\t\t\t\treturn `今天 ${timeStr}`\n\t\t\t\t} else if (messageDate.getTime() === yesterday.getTime()) {\n\t\t\t\t\treturn `昨天 ${timeStr}`\n\t\t\t\t} else if (messageDate.getTime() === dayBeforeYesterday.getTime()) {\n\t\t\t\t\treturn `前天 ${timeStr}`\n\t\t\t\t} else if (date.getFullYear() === now.getFullYear()) {\n\t\t\t\t\t// 同年但不是近三天，显示月日\n\t\t\t\t\tconst month = (date.getMonth() + 1).toString().padStart(2, '0')\n\t\t\t\t\tconst day = date.getDate().toString().padStart(2, '0')\n\t\t\t\t\treturn `${month}-${day} ${timeStr}`\n\t\t\t\t} else {\n\t\t\t\t\t// 不同年，显示完整日期\n\t\t\t\t\tconst year = date.getFullYear()\n\t\t\t\t\tconst month = (date.getMonth() + 1).toString().padStart(2, '0')\n\t\t\t\t\tconst day = date.getDate().toString().padStart(2, '0')\n\t\t\t\t\treturn `${year}-${month}-${day} ${timeStr}`\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t// 滚动到底部\n\t\t\tscrollToBottom() {\n\t\t\t\tconst query = uni.createSelectorQuery().in(this)\n\t\t\t\tquery.select('.chat-container').boundingClientRect((rect) => {\n\t\t\t\t\tif (rect) {\n\t\t\t\t\t\tthis.scrollTop = rect.height\n\t\t\t\t\t}\n\t\t\t\t}).exec()\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style scoped>\n\t/* 全局防止水平溢出 */\n\t* {\n\t\tmax-width: 100%;\n\t\tbox-sizing: border-box;\n\t}\n\t\n\t.container {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\theight: 100vh;\n\t\tbackground-color: #FAFAFA;\n\t\tmax-width: 100vw;\n\t\toverflow-x: hidden;\n\t}\n\t\n\t.chat-container {\n\t\tflex: 1;\n\t\tpadding: 30rpx 20rpx;\n\t\tpadding-bottom: 160rpx;\n\t\toverflow-y: auto;\n\t\toverflow-x: hidden;\n\t\tbox-sizing: border-box;\n\t}\n\t\n\t.message-item {\n\t\tdisplay: flex;\n\t\tmargin-bottom: 35rpx;\n\t\tanimation: fadeIn 0.3s ease-in;\n\t\tmax-width: 100%;\n\t\tbox-sizing: border-box;\n\t}\n\t\n\t@keyframes fadeIn {\n\t\tfrom { opacity: 0; transform: translateY(20rpx); }\n\t\tto { opacity: 1; transform: translateY(0); }\n\t}\n\t\n\t.user-message {\n\t\tjustify-content: flex-end;  /* 用户消息整体靠右 */\n\t}\n\t\n\t.assistant-message {\n\t\tjustify-content: flex-start;  /* AI消息整体靠左 */\n\t}\n\t\n\t.avatar {\n\t\twidth: 55rpx;\n\t\theight: 55rpx;\n\t\tborder-radius: 50%;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tfont-size: 26rpx;\n\t\tflex-shrink: 0;\n\t\tbox-shadow: 0 2rpx 8rpx rgba(0,0,0,0.08);\n\t}\n\t\n\t.user-avatar {\n\t\tbackground: linear-gradient(135deg, #667eea, #764ba2);\n\t\tcolor: white;\n\t\tmargin-left: 15rpx;\n\t}\n\t\n\t.assistant-avatar {\n\t\tbackground: linear-gradient(135deg, #4ECDC4, #44A08D);\n\t\tcolor: white;\n\t\tmargin-right: 15rpx;\n\t}\n\t\n\t.message-content {\n\t\tmax-width: calc(100vw - 150rpx);\n\t\tmin-width: 100rpx;\n\t\tpadding: 18rpx 22rpx;\n\t\tborder-radius: 18rpx;\n\t\tposition: relative;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tword-wrap: break-word;\n\t\toverflow-wrap: break-word;\n\t\tbox-sizing: border-box;\n\t}\n\t\n\t.user-message .message-content {\n\t\tbackground: linear-gradient(135deg, #667eea, #764ba2);\n\t\tcolor: white;\n\t\tborder-bottom-right-radius: 6rpx;\n\t\tbox-shadow: 0 3rpx 12rpx rgba(102, 126, 234, 0.25);\n\t}\n\t\n\t.assistant-message .message-content {\n\t\tbackground: white;\n\t\tcolor: #333;\n\t\tborder-bottom-left-radius: 6rpx;\n\t\tbox-shadow: 0 2rpx 12rpx rgba(0,0,0,0.06);\n\t}\n\t\n\t.message-text {\n\t\tfont-size: 28rpx;\n\t\tline-height: 1.6;\n\t\tmargin-bottom: 8rpx;\n\t\tword-wrap: break-word;\n\t\toverflow-wrap: break-word;\n\t\twhite-space: pre-wrap;\n\t\tmax-width: 100%;\n\t}\n\t\n\t.message-time {\n\t\tfont-size: 20rpx;\n\t\topacity: 0.5;\n\t\talign-self: flex-end;\n\t\tmargin-top: 8rpx;\n\t}\n\t\n\t/* 用户消息时间左对齐 */\n\t.user-message .message-time {\n\t\talign-self: flex-start;\n\t}\n\t\n\t/* 记录卡片样式 */\n\t.records-action {\n\t\tmargin-top: 20rpx;\n\t\tpadding-top: 20rpx;\n\t\tborder-top: 1px solid rgba(0,0,0,0.1);\n\t}\n\t\n\t.single-record-confirm {\n\t\tmargin-bottom: 20rpx;\n\t}\n\t\n\t.record-card {\n\t\tbackground: #f8f9ff;\n\t\tborder-radius: 12rpx;\n\t\tpadding: 18rpx;\n\t\tmargin-bottom: 12rpx;\n\t\tmax-width: 100%;\n\t\tbox-sizing: border-box;\n\t\toverflow-wrap: break-word;\n\t\tbox-shadow: 0 1rpx 6rpx rgba(0,0,0,0.04);\n\t}\n\t\n\t.record-header {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 10rpx;\n\t\tmargin-bottom: 15rpx;\n\t}\n\t\n\t.record-type-icon {\n\t\tfont-size: 32rpx;\n\t}\n\t\n\t.record-type-text {\n\t\tfont-size: 24rpx;\n\t\tcolor: #666;\n\t\tflex: 1;\n\t}\n\t\n\t.record-amount {\n\t\tfont-size: 32rpx;\n\t\tfont-weight: bold;\n\t\tcolor: #333;\n\t}\n\t\n\t.record-details {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 8rpx;\n\t\tmargin-bottom: 15rpx;\n\t}\n\t\n\t.record-category,\n\t.record-time,\n\t.record-note {\n\t\tfont-size: 24rpx;\n\t\tcolor: #666;\n\t\tline-height: 1.4;\n\t}\n\t\n\t.confirm-single-btn {\n\t\twidth: 100%;\n\t\tbackground: linear-gradient(135deg, #4ECDC4, #44A08D);\n\t\tcolor: white;\n\t\tborder: none;\n\t\tborder-radius: 20rpx;\n\t\tpadding: 12rpx 20rpx;\n\t\tfont-size: 24rpx;\n\t\tfont-weight: 500;\n\t\tbox-shadow: 0 2rpx 8rpx rgba(78, 205, 196, 0.25);\n\t}\n\t\n\t.recorded-single-status {\n\t\twidth: 100%;\n\t\ttext-align: center;\n\t\tpadding: 15rpx;\n\t}\n\t\n\t.recorded-text {\n\t\tcolor: #4ECDC4;\n\t\tfont-size: 26rpx;\n\t\tfont-weight: 600;\n\t}\n\t\n\t.loading-content {\n\t\tbackground: white !important;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 15rpx;\n\t}\n\t\n\t.loading-dots {\n\t\tdisplay: flex;\n\t\tgap: 8rpx;\n\t}\n\t\n\t.dot {\n\t\twidth: 12rpx;\n\t\theight: 12rpx;\n\t\tborder-radius: 50%;\n\t\tbackground: #4ECDC4;\n\t\tanimation: bounce 1.4s ease-in-out infinite both;\n\t}\n\t\n\t.dot:nth-child(1) { animation-delay: -0.32s; }\n\t.dot:nth-child(2) { animation-delay: -0.16s; }\n\t\n\t@keyframes bounce {\n\t\t0%, 80%, 100% { transform: scale(0); }\n\t\t40% { transform: scale(1); }\n\t}\n\t\n\t.loading-text {\n\t\tfont-size: 26rpx;\n\t\tcolor: #666;\n\t}\n\t\n\t/* 固定在底部的输入区域 */\n\t.input-container-fixed {\n\t\tposition: fixed;\n\t\tbottom: 0;\n\t\tleft: 0;\n\t\tright: 0;\n\t\tbackground: linear-gradient(to bottom, #FAFAFA, #F5F5F5);\n\t\tpadding: 15rpx 20rpx 50rpx;\n\t\tz-index: 999;\n\t\tbox-sizing: border-box;\n\t\tmax-width: 100vw;\n\t\tbox-shadow: 0 -2rpx 15rpx rgba(0,0,0,0.05);\n\t\tborder-top: 1rpx solid rgba(0,0,0,0.05);\n\t}\n\t\n\t/* 录音遮罩层 */\n\t.recording-overlay {\n\t\tposition: fixed;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\tright: 0;\n\t\tbottom: 0;\n\t\tbackground: rgba(0, 0, 0, 0.6);\n\t\tz-index: 1000;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t}\n\t\n\t.recording-content {\n\t\tbackground: rgba(0, 0, 0, 0.8);\n\t\tborder-radius: 20rpx;\n\t\tpadding: 60rpx 40rpx;\n\t\ttext-align: center;\n\t\tcolor: white;\n\t}\n\t\n\t.voice-animation {\n\t\tmargin-bottom: 30rpx;\n\t\tposition: relative;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t}\n\t\n\t.voice-icon {\n\t\tfont-size: 60rpx;\n\t\tmargin-right: 20rpx;\n\t}\n\t\n\t.wave-container {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 6rpx;\n\t}\n\t\n\t.wave {\n\t\twidth: 6rpx;\n\t\tbackground: #1AAD19;\n\t\tborder-radius: 3rpx;\n\t\tanimation: wave-animation 1.2s ease-in-out infinite;\n\t}\n\t\n\t.wave1 { height: 20rpx; animation-delay: 0s; }\n\t.wave2 { height: 35rpx; animation-delay: 0.1s; }\n\t.wave3 { height: 50rpx; animation-delay: 0.2s; }\n\t.wave4 { height: 35rpx; animation-delay: 0.3s; }\n\t.wave5 { height: 20rpx; animation-delay: 0.4s; }\n\t\n\t@keyframes wave-animation {\n\t\t0%, 100% { transform: scaleY(0.3); }\n\t\t50% { transform: scaleY(1); }\n\t}\n\t\n\t.recording-text {\n\t\tfont-size: 32rpx;\n\t\tfont-weight: bold;\n\t\tmargin-bottom: 10rpx;\n\t\tdisplay: block;\n\t}\n\t\n\t.recording-hint {\n\t\tfont-size: 24rpx;\n\t\topacity: 0.8;\n\t\tdisplay: block;\n\t}\n\t\n\t.function-buttons {\n\t\tmargin-bottom: 15rpx;\n\t\tdisplay: flex;\n\t\tjustify-content: flex-end;\n\t\twidth: 100%;\n\t\tbox-sizing: border-box;\n\t}\n\t\n\t.clear-btn {\n\t\tpadding: 12rpx 22rpx;\n\t\tbackground: linear-gradient(135deg, #FFF5F5, #FFEBEB);\n\t\tborder-radius: 15rpx;\n\t\tfont-size: 22rpx;\n\t\tcolor: #E74C3C;\n\t\tline-height: 1;\n\t\tborder: none;\n\t\tbox-shadow: 0 2rpx 6rpx rgba(231, 76, 60, 0.12);\n\t}\n\t\n\t.clear-btn:active {\n\t\tbackground: #FFE5E5;\n\t\ttransform: scale(0.95);\n\t}\n\t\n\t.input-row {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 15rpx;\n\t\twidth: 100%;\n\t\tbox-sizing: border-box;\n\t}\n\t\n\t/* 切换按钮 */\n\t.voice-toggle-btn,\n\t.keyboard-toggle-btn {\n\t\twidth: 68rpx;\n\t\theight: 68rpx;\n\t\tbackground: linear-gradient(135deg, #FFFFFF, #F8F9FA);\n\t\tborder-radius: 12rpx;\n\t\tfont-size: 30rpx;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\ttransition: all 0.2s ease;\n\t\tborder: none;\n\t\tbox-shadow: 0 3rpx 10rpx rgba(0,0,0,0.08);\n\t}\n\t\n\t.voice-toggle-btn:active,\n\t.keyboard-toggle-btn:active {\n\t\tbackground: linear-gradient(135deg, #F0F0F0, #E9ECEF);\n\t\ttransform: scale(0.95);\n\t}\n\t\n\t/* 语音输入按钮 */\n\t.voice-btn {\n\t\tflex: 1;\n\t\tmin-width: 0;\n\t\theight: 68rpx;\n\t\tbackground: linear-gradient(135deg, #FFFFFF, #F8F9FA);\n\t\tcolor: #333;\n\t\tborder-radius: 12rpx;\n\t\tfont-size: 28rpx;\n\t\tfont-weight: 500;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\ttransition: all 0.2s ease;\n\t\tbox-sizing: border-box;\n\t\tborder: none;\n\t\tbox-shadow: 0 3rpx 10rpx rgba(0,0,0,0.08);\n\t}\n\t\n\t.voice-btn.recording {\n\t\tbackground: linear-gradient(135deg, #6C757D, #5A6268);\n\t\tcolor: white;\n\t\tbox-shadow: 0 3rpx 12rpx rgba(108, 117, 125, 0.3);\n\t}\n\t\n\t.voice-btn:disabled {\n\t\topacity: 0.6;\n\t}\n\t\n\t.voice-text {\n\t\tfont-size: 28rpx;\n\t\tfont-weight: 500;\n\t}\n\t\n\t/* 文本输入框 */\n\t.chat-input {\n\t\tflex: 1;\n\t\tmin-width: 0;\n\t\theight: 68rpx;\n\t\tpadding: 0 22rpx;\n\t\tborder-radius: 12rpx;\n\t\tfont-size: 28rpx;\n\t\tbackground: linear-gradient(135deg, #FFFFFF, #F8F9FA);\n\t\ttransition: all 0.2s ease;\n\t\tbox-sizing: border-box;\n\t\tborder: none;\n\t\tbox-shadow: 0 3rpx 10rpx rgba(0,0,0,0.08);\n\t}\n\t\n\t/* 发送按钮 */\n\t.send-btn {\n\t\tmin-width: 110rpx;\n\t\twidth: auto;\n\t\theight: 68rpx;\n\t\tpadding: 0 28rpx;\n\t\tbackground: linear-gradient(135deg, #1AAD19, #179B16);\n\t\tcolor: white;\n\t\tborder: none;\n\t\tborder-radius: 12rpx;\n\t\tfont-size: 26rpx;\n\t\tfont-weight: 500;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\ttransition: all 0.2s ease;\n\t\tflex-shrink: 0;\n\t\tbox-shadow: 0 3rpx 12rpx rgba(26, 173, 25, 0.3);\n\t}\n\t\n\t.send-btn:disabled {\n\t\tbackground: linear-gradient(135deg, #E9ECEF, #DEE2E6);\n\t\tcolor: #ADB5BD;\n\t\tbox-shadow: 0 2rpx 6rpx rgba(0,0,0,0.06);\n\t}\n\t\n\t.send-btn:active:not(:disabled) {\n\t\tbackground: linear-gradient(135deg, #179B16, #148A13);\n\t\ttransform: scale(0.98);\n\t\tbox-shadow: 0 2rpx 8rpx rgba(26, 173, 25, 0.35);\n\t}\n\t\n\t.send-text {\n\t\tfont-size: 26rpx;\n\t\tfont-weight: 500;\n\t}\n</style>\n","import MiniProgramPage from 'D:/simple-account-v1.0.4/pages/chat/chat.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":"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"}